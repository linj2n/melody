<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<th:block th:fragment="footer(type,catalog)">
    <th:block th:if="${type} == 'Post'">

        <!-- async load function -->
        <script>
            function async(u, c) {
                var d = document, t = 'script',
                    o = d.createElement(t),
                    s = d.getElementsByTagName(t)[0];
                o.src = u;
                if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
                s.parentNode.insertBefore(o, s);
            }
        </script>
        <!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
        <script>
            async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
                anchors.options = {
                    visible: 'always',
                    placement: 'right',
                    icon: '#'
                };
                anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
            })
        </script>
        <style>
            /* place left on bigger screen */
            @media all and (min-width: 800px) {
                .anchorjs-link{
                    position: absolute;
                    left: -0.75em;
                    font-size: 1.1em;
                    margin-top : -0.1em;
                }
            }
        </style>
    </th:block>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <!-- SNS Link -->
                    <p class="copyright text-muted">
                        Copyright &copy; 2018 linj2n
                        <br>
                        Theme <a href="https://github.com/Huxpro/huxpro.github.io"> Hux </a> Powered by <a href="https://github.com/linj2n/melody">Melody</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- jQuery -->
    <script th:src="@{/blog/themes/huxpro/js/jquery.min.js}"></script>

    <!-- Bootstrap Core JavaScript -->
    <!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
    <script th:src="@{/blog/themes/huxpro/js/bootstrap.min.js}"></script>

    <!-- Custom Theme JavaScript -->
    <script th:src="@{/blog/themes/huxpro/js/hux-blog.min.js}"></script>

    <!-- Service Worker -->

    <script th:src="@{/blog/themes/huxpro/js/snackbar.js}"></script>
    <!--<script th:src="@{/blog/themes/huxpro/js/sw-registration.js}"></script>-->

    <!-- async load function -->
    <script>
        function async(u, c) {
            var d = document, t = 'script',
                o = d.createElement(t),
                s = d.getElementsByTagName(t)[0];
            o.src = u;
            if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
            s.parentNode.insertBefore(o, s);
        }
    </script>

    <th:block th:if="${type} == 'Archives' or ${type} == 'Categories'">
        <!-- jquery.tagcloud.js -->
        <script th:inline="javascript">
            /*<![CDATA[*/
            var tagCloudJsUrl = [[@{/blog/themes/huxpro/js/jquery.tagcloud.js}]];
            /*]]>*/
            async(tagCloudJsUrl,function(){
                $.fn.tagcloud.defaults = {
                    //size: {start: 1, end: 1, unit: 'em'},
                    color: {start: '#bbbbee', end: '#2f93b4'}
                };
                $('#tag_cloud a').tagcloud();
            })
        </script>
        <script th:src="@{/blog/themes/huxpro/js/archive.js}"></script>
    </th:block>

    <!--fastClick.js -->
    <script>
        async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
            var $nav = document.querySelector("nav");
            if($nav) FastClick.attach($nav);
        })
    </script>

    <th:block th:if="${catalog} == true">
        <script th:inline="javascript">
            function generateCatalog (selector) {

                // interop with multilangual
                // if ('{{ page.multilingual }}' == 'true') {
                //     _containerSelector = 'div.post-container.active'
                // } else {
                //     _containerSelector = 'div.post-container'
                // }
                _containerSelector = 'div.post-container';
                // init
                var P = $(_containerSelector),a,n,t,l,i,c;
                a = P.find('h1,h2,h3,h4,h5,h6');
                // clean
                $(selector).html('');

                // appending
                a.each(function () {
                    n = $(this).prop('tagName').toLowerCase();
                    i = "#"+$(this).prop('id');
                    t = $(this).text();
                    c = $('<a href="'+i+'" rel="nofollow">'+t+'</a>');
                    l = $('<li class="'+n+'_nav"></li>').append(c);
                    $(selector).append(l);
                });
                return true;
            }

            generateCatalog(".catalog-body");

            // toggle side catalog
            $(".catalog-toggle").click((function(e){
                e.preventDefault();
                $('.side-catalog').toggleClass("fold")
            }))

            /*
             * Doc: https://github.com/davist11/jQuery-One-Page-Nav
             * Fork by Hux to support padding
             */
            /*<![CDATA[*/
            var navJsUrl = [[@{/blog/themes/huxpro/js/jquery.nav.js}]];
            /*]]>*/
            async(navJsUrl, function () {
                $('.catalog-body').onePageNav({
                    currentClass: "active",
                    changeHash: !1,
                    easing: "swing",
                    filter: "",
                    scrollSpeed: 700,
                    scrollOffset: 0,
                    scrollThreshold: .2,
                    begin: null,
                    end: null,
                    scrollChange: null,
                    padding: 80
                });
            });
        </script>
    </th:block>
</th:block>
</body>
</html>